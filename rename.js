const inArg = $arguments;

const FG = ['ğŸ‡­ğŸ‡°','ğŸ‡²ğŸ‡´','ğŸ‡¹ğŸ‡¼','ğŸ‡¯ğŸ‡µ','ğŸ‡°ğŸ‡·','ğŸ‡¸ğŸ‡¬','ğŸ‡ºğŸ‡¸','ğŸ‡¬ğŸ‡§','ğŸ‡«ğŸ‡·','ğŸ‡©ğŸ‡ª','ğŸ‡¦ğŸ‡º','ğŸ‡¦ğŸ‡ª','ğŸ‡¦ğŸ‡«','ğŸ‡¦ğŸ‡±','ğŸ‡©ğŸ‡¿','ğŸ‡¦ğŸ‡´','ğŸ‡¦ğŸ‡·','ğŸ‡¦ğŸ‡²','ğŸ‡¦ğŸ‡¹','ğŸ‡¦ğŸ‡¿','ğŸ‡§ğŸ‡­','ğŸ‡§ğŸ‡©','ğŸ‡§ğŸ‡¾','ğŸ‡§ğŸ‡ª','ğŸ‡§ğŸ‡¿','ğŸ‡§ğŸ‡¯','ğŸ‡§ğŸ‡¹','ğŸ‡§ğŸ‡´','ğŸ‡§ğŸ‡¦','ğŸ‡§ğŸ‡¼','ğŸ‡§ğŸ‡·','ğŸ‡»ğŸ‡¬','ğŸ‡§ğŸ‡³','ğŸ‡§ğŸ‡¬','ğŸ‡§ğŸ‡«','ğŸ‡§ğŸ‡®','ğŸ‡°ğŸ‡­','ğŸ‡¨ğŸ‡²','ğŸ‡¨ğŸ‡¦','ğŸ‡¨ğŸ‡»','ğŸ‡°ğŸ‡¾','ğŸ‡¨ğŸ‡«','ğŸ‡¹ğŸ‡©','ğŸ‡¨ğŸ‡±','ğŸ‡¨ğŸ‡´','ğŸ‡°ğŸ‡²','ğŸ‡¨ğŸ‡¬','ğŸ‡¨ğŸ‡©','ğŸ‡¨ğŸ‡·','ğŸ‡­ğŸ‡·','ğŸ‡¨ğŸ‡¾','ğŸ‡¨ğŸ‡¿','ğŸ‡©ğŸ‡°','ğŸ‡©ğŸ‡¯','ğŸ‡©ğŸ‡´','ğŸ‡ªğŸ‡¨','ğŸ‡ªğŸ‡¬','ğŸ‡¸ğŸ‡»','ğŸ‡¬ğŸ‡¶','ğŸ‡ªğŸ‡·','ğŸ‡ªğŸ‡ª','ğŸ‡ªğŸ‡¹','ğŸ‡«ğŸ‡¯','ğŸ‡«ğŸ‡®','ğŸ‡¬ğŸ‡¦','ğŸ‡¬ğŸ‡²','ğŸ‡¬ğŸ‡ª','ğŸ‡¬ğŸ‡­','ğŸ‡¬ğŸ‡·','ğŸ‡¬ğŸ‡±','ğŸ‡¬ğŸ‡¹','ğŸ‡¬ğŸ‡³','ğŸ‡¬ğŸ‡¾','ğŸ‡­ğŸ‡¹','ğŸ‡­ğŸ‡³','ğŸ‡­ğŸ‡º','ğŸ‡®ğŸ‡¸','ğŸ‡®ğŸ‡³','ğŸ‡®ğŸ‡©','ğŸ‡®ğŸ‡·','ğŸ‡®ğŸ‡¶','ğŸ‡®ğŸ‡ª','ğŸ‡®ğŸ‡²','ğŸ‡®ğŸ‡±','ğŸ‡®ğŸ‡¹','ğŸ‡¨ğŸ‡®','ğŸ‡¯ğŸ‡²','ğŸ‡¯ğŸ‡´','ğŸ‡°ğŸ‡¿','ğŸ‡°ğŸ‡ª','ğŸ‡°ğŸ‡¼','ğŸ‡°ğŸ‡¬','ğŸ‡±ğŸ‡¦','ğŸ‡±ğŸ‡»','ğŸ‡±ğŸ‡§','ğŸ‡±ğŸ‡¸','ğŸ‡±ğŸ‡·','ğŸ‡±ğŸ‡¾','ğŸ‡±ğŸ‡¹','ğŸ‡±ğŸ‡º','ğŸ‡²ğŸ‡°','ğŸ‡²ğŸ‡¬','ğŸ‡²ğŸ‡¼','ğŸ‡²ğŸ‡¾','ğŸ‡²ğŸ‡»','ğŸ‡²ğŸ‡±','ğŸ‡²ğŸ‡¹','ğŸ‡²ğŸ‡·','ğŸ‡²ğŸ‡º','ğŸ‡²ğŸ‡½','ğŸ‡²ğŸ‡©','ğŸ‡²ğŸ‡¨','ğŸ‡²ğŸ‡³','ğŸ‡²ğŸ‡ª','ğŸ‡²ğŸ‡¦','ğŸ‡²ğŸ‡¿','ğŸ‡²ğŸ‡²','ğŸ‡³ğŸ‡¦','ğŸ‡³ğŸ‡µ','ğŸ‡³ğŸ‡±','ğŸ‡³ğŸ‡¿','ğŸ‡³ğŸ‡®','ğŸ‡³ğŸ‡ª','ğŸ‡³ğŸ‡¬','ğŸ‡°ğŸ‡µ','ğŸ‡³ğŸ‡´','ğŸ‡´ğŸ‡²','ğŸ‡µğŸ‡°','ğŸ‡µğŸ‡¦','ğŸ‡µğŸ‡¾','ğŸ‡µğŸ‡ª','ğŸ‡µğŸ‡­','ğŸ‡µğŸ‡¹','ğŸ‡µğŸ‡·','ğŸ‡¶ğŸ‡¦','ğŸ‡·ğŸ‡´','ğŸ‡·ğŸ‡º','ğŸ‡·ğŸ‡¼','ğŸ‡¸ğŸ‡²','ğŸ‡¸ğŸ‡¦','ğŸ‡¸ğŸ‡³','ğŸ‡·ğŸ‡¸','ğŸ‡¸ğŸ‡±','ğŸ‡¸ğŸ‡°','ğŸ‡¸ğŸ‡®','ğŸ‡¸ğŸ‡´','ğŸ‡¿ğŸ‡¦','ğŸ‡ªğŸ‡¸','ğŸ‡±ğŸ‡°','ğŸ‡¸ğŸ‡©','ğŸ‡¸ğŸ‡·','ğŸ‡¸ğŸ‡¿','ğŸ‡¸ğŸ‡ª','ğŸ‡¨ğŸ‡­','ğŸ‡¸ğŸ‡¾','ğŸ‡¹ğŸ‡¯','ğŸ‡¹ğŸ‡¿','ğŸ‡¹ğŸ‡­','ğŸ‡¹ğŸ‡¬','ğŸ‡¹ğŸ‡´','ğŸ‡¹ğŸ‡¹','ğŸ‡¹ğŸ‡³','ğŸ‡¹ğŸ‡·','ğŸ‡¹ğŸ‡²','ğŸ‡»ğŸ‡®','ğŸ‡ºğŸ‡¬','ğŸ‡ºğŸ‡¦','ğŸ‡ºğŸ‡¾','ğŸ‡ºğŸ‡¿','ğŸ‡»ğŸ‡ª','ğŸ‡»ğŸ‡³','ğŸ‡¾ğŸ‡ª','ğŸ‡¿ğŸ‡²','ğŸ‡¿ğŸ‡¼','ğŸ‡¦ğŸ‡©','ğŸ‡·ğŸ‡ª','ğŸ‡µğŸ‡±','ğŸ‡¬ğŸ‡º','ğŸ‡»ğŸ‡¦','ğŸ‡±ğŸ‡®','ğŸ‡¨ğŸ‡¼','ğŸ‡¸ğŸ‡¨','ğŸ‡¦ğŸ‡¶','ğŸ‡¬ğŸ‡®','ğŸ‡¨ğŸ‡º','ğŸ‡«ğŸ‡´','ğŸ‡¦ğŸ‡½','ğŸ‡§ğŸ‡²','ğŸ‡¹ğŸ‡±','ğŸ‡¦ğŸ‡¬','ğŸ‡§ğŸ‡§','ğŸ‡¦ğŸ‡¼','ğŸ‡¦ğŸ‡¬','ğŸ‡§ğŸ‡§','ğŸ‡¦ğŸ‡¼','ğŸ‡¸ğŸ‡§','ğŸ‡²ğŸ‡ª'];
const EN = ['HKG','MAC','TPE','JPN','KOR','SGP','USA','GBR','FRA','DEU','AUS','ARE','AFG','ALB','DZA','AGO','ARG','ARM','AUT','AZE','BHR','BGD','BLR','BEL','BLZ','BEN','BTN','BOL','BIH','BWA','BRA','VGB','BRN','BGR','BFA','BDI','KHM','CMR','CAN','CPV','CYM','CAF','TCD','CHL','COL','COM','COG','COD','CRI','HRV','CYP','CZE','DNK','DJI','DOM','ECU','EGY','SLV','GNQ','ERI','EST','ETH','FJI','FIN','GAB','GMB','GEO','GHA','GRC','GRL','GTM','GIN','GUY','HTI','HND','HUN','ISL','IND','IDN','IRN','IRQ','IRL','IMN','ISR','ITA','CIV','JAM','JOR','KAZ','KEN','KWT','KGZ','LAO','LVA','LBN','LSO','LBR','LBY','LTU','LUX','MKD','MDG','MWI','MYS','MDV','MLI','MLT','MRT','MUS','MEX','MDA','MCO','MNG','MNE','MAR','MOZ','MMR','NAM','NPL','NLD','NZL','NIC','NER','NGA','PRK','NOR','OMN','PAK','PAN','PRY','PER','PHL','PRT','PRI','QAT','ROU','RUS','RWA','SMR','SAU','SEN','SRB','SLE','SVK','SVN','SOM','ZAF','ESP','LKA','SDN','SUR','SWZ','SWE','CHE','SYR','TJK','TZA','THA','TGO','TON','TTO','TUN','TUR','TKM','VIR','UGA','UKR','URY','UZB','VEN','VNM','YEM','ZMB','ZWE','AND','REU','POL','GUM','VAT','LIE','CUW','SYC','ATA','GIB','CUB','FRO','ALA','BMU','TLS','ATG','BRB','ABW','SLB','MNE'];
const ZH = ['é¦™æ¸¯','æ¾³é—¨','å°æ¹¾','æ—¥æœ¬','éŸ©å›½','æ–°åŠ å¡','ç¾å›½','è‹±å›½','æ³•å›½','å¾·å›½','æ¾³å¤§åˆ©äºš','é˜¿è”é…‹','é˜¿å¯Œæ±—','é˜¿å°”å·´å°¼äºš','é˜¿å°”åŠåˆ©äºš','å®‰å“¥æ‹‰','é˜¿æ ¹å»·','äºšç¾å°¼äºš','å¥¥åœ°åˆ©','é˜¿å¡æ‹œç–†','å·´æ—','å­ŸåŠ æ‹‰å›½','ç™½ä¿„ç½—æ–¯','æ¯”åˆ©æ—¶','ä¼¯åˆ©å…¹','è´å®','ä¸ä¸¹','ç»åˆ©ç»´äºš','æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£','åšèŒ¨ç“¦çº³','å·´è¥¿','è‹±å±ç»´äº¬ç¾¤å²›','æ–‡è±','ä¿åŠ åˆ©äºš','å¸ƒåŸºçº³æ³•ç´¢','å¸ƒéš†è¿ª','æŸ¬åŸ”å¯¨','å–€éº¦éš†','åŠ æ‹¿å¤§','ä½›å¾—è§’','å¼€æ›¼ç¾¤å²›','ä¸­éå…±å’Œå›½','ä¹å¾—','æ™ºåˆ©','å“¥ä¼¦æ¯”äºš','ç§‘æ‘©ç½—','åˆšæœ(å¸ƒ)','åˆšæœ(é‡‘)','å“¥æ–¯è¾¾é»åŠ ','å…‹ç½—åœ°äºš','å¡æµ¦è·¯æ–¯','æ·å…‹','ä¸¹éº¦','å‰å¸ƒæ','å¤šç±³å°¼åŠ å…±å’Œå›½','å„ç“œå¤šå°”','åŸƒåŠ','è¨å°”ç“¦å¤š','èµ¤é“å‡ å†…äºš','å„ç«‹ç‰¹é‡Œäºš','çˆ±æ²™å°¼äºš','åŸƒå¡ä¿„æ¯”äºš','æ–æµ','èŠ¬å…°','åŠ è“¬','å†ˆæ¯”äºš','æ ¼é²å‰äºš','åŠ çº³','å¸Œè…Š','æ ¼é™µå…°','å±åœ°é©¬æ‹‰','å‡ å†…äºš','åœ­äºšé‚£','æµ·åœ°','æ´ªéƒ½æ‹‰æ–¯','åŒˆç‰™åˆ©','å†°å²›','å°åº¦','å°å°¼','ä¼Šæœ—','ä¼Šæ‹‰å…‹','çˆ±å°”å…°','é©¬æ©å²›','ä»¥è‰²åˆ—','æ„å¤§åˆ©','ç§‘ç‰¹è¿ªç“¦','ç‰™ä¹°åŠ ','çº¦æ—¦','å“ˆè¨å…‹æ–¯å¦','è‚¯å°¼äºš','ç§‘å¨ç‰¹','å‰å°”å‰æ–¯æ–¯å¦','è€æŒ','æ‹‰è„±ç»´äºš','é»å·´å«©','è±ç´¢æ‰˜','åˆ©æ¯”é‡Œäºš','åˆ©æ¯”äºš','ç«‹é™¶å®›','å¢æ£®å ¡','é©¬å…¶é¡¿','é©¬è¾¾åŠ æ–¯åŠ ','é©¬æ‹‰ç»´','é©¬æ¥è¥¿äºš','é©¬å°”ä»£å¤«','é©¬é‡Œ','é©¬è€³ä»–','æ¯›åˆ©å¡”å°¼äºš','æ¯›é‡Œæ±‚æ–¯','å¢¨è¥¿å“¥','æ‘©å°”å¤šç“¦','æ‘©çº³å“¥','è’™å¤','é»‘å±±å…±å’Œå›½','æ‘©æ´›å“¥','è«æ¡‘æ¯”å…‹','ç¼…ç”¸','çº³ç±³æ¯”äºš','å°¼æ³Šå°”','è·å…°','æ–°è¥¿å…°','å°¼åŠ æ‹‰ç“œ','å°¼æ—¥å°”','å°¼æ—¥åˆ©äºš','æœé²œ','æŒªå¨','é˜¿æ›¼','å·´åŸºæ–¯å¦','å·´æ‹¿é©¬','å·´æ‹‰åœ­','ç§˜é²','è²å¾‹å®¾','è‘¡è„ç‰™','æ³¢å¤šé»å„','å¡å¡”å°”','ç½—é©¬å°¼äºš','ä¿„ç½—æ–¯','å¢æ—ºè¾¾','åœ£é©¬åŠ›è¯º','æ²™ç‰¹é˜¿æ‹‰ä¼¯','å¡å†…åŠ å°”','å¡å°”ç»´äºš','å¡æ‹‰åˆ©æ˜‚','æ–¯æ´›ä¼å…‹','æ–¯æ´›æ–‡å°¼äºš','ç´¢é©¬é‡Œ','å—é','è¥¿ç­ç‰™','æ–¯é‡Œå…°å¡','è‹ä¸¹','è‹é‡Œå—','æ–¯å¨å£«å…°','ç‘å…¸','ç‘å£«','å™åˆ©äºš','å¡”å‰å…‹æ–¯å¦','å¦æ¡‘å°¼äºš','æ³°å›½','å¤šå“¥','æ±¤åŠ ','ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥','çªå°¼æ–¯','åœŸè€³å…¶','åœŸåº“æ›¼æ–¯å¦','ç¾å±ç»´å°”äº¬ç¾¤å²›','ä¹Œå¹²è¾¾','ä¹Œå…‹å…°','ä¹Œæ‹‰åœ­','ä¹Œå…¹åˆ«å…‹æ–¯å¦','å§”å†…ç‘æ‹‰','è¶Šå—','ä¹Ÿé—¨','èµæ¯”äºš','æ´¥å·´å¸ƒéŸ¦','å®‰é“å°”','ç•™å°¼æ±ª','æ³¢å…°','å…³å²›','æ¢µè’‚å†ˆ','åˆ—æ”¯æ•¦å£«ç™»','åº“æ‹‰ç´¢','å¡èˆŒå°”','å—æ','ç›´å¸ƒç½—é™€','å¤å·´','æ³•ç½—ç¾¤å²›','å¥¥å…°ç¾¤å²›','ç™¾æ…•å¤§','ä¸œå¸æ±¶','å®‰æç“œå’Œå·´å¸ƒè¾¾','å·´å·´å¤šæ–¯','é˜¿é²å·´','æ‰€ç½—é—¨ç¾¤å²›','é»‘å±±'];

// éœ€è¦æ’é™¤çš„å…³é”®è¯
const excludeKeywords = [
  /åˆ†å‰²/, /ä½™é¢/, /ç»„/, /åˆ°æœŸ/, /å‰©ä½™/, /é‡ç½®/, /å¥—é¤/, /å®˜ç½‘/, /ç»­è´¹/,/è¿”ä½£/,/ç”¨ä¸äº†/,/å¸è½½/,/è½¯ä»¶/,/æ²¡ç½‘/,
  /ç½‘å€/, /ç½‘ç«™/, /å……å€¼/, /æ›´æ–°/, /åœ°å€/, /å›½å†…/, /æ°¸ä¹…/, /æ•™å­¦/, /com/, /www/, /69/, /è´­ä¹°/
];

// é¢å¤–å¤‡æ³¨å…³é”®è¯
const extraRemarks = [
  { key: /æµ‹è¯•|Test/i, value: "Test" },
  { key: /Unmetered|æ— é™æµé‡/i, value: "UnLD" },
  { key: /ä¸é™æ—¶/i, value: "PAYG" },
  { key: /æµåª’ä½“è§£é”/i, value: "Unlocked" },
  { key: /å®¶å®½|å®¶åº­å®½å¸¦/, value: "HomB" },
  { key: /ä¸“çº¿/, value: "PlusLine" },
  { key: /æ·±G/, value: "SZ-HK" },
  { key: /å¤G/, value: "XM-HK" },
  { key: /åŸç”Ÿ/, value: "Natv" },
  { key: /æ¸¸æˆ|GAME/, value: "Game" }
];

// æ–°å¢äº”ä¸ªé«˜ä¼˜å…ˆçº§å¤‡æ³¨
const highPriorityRemarks = [
  { key: /IPLC/, value: "IPLC" },
  { key: /IEPL/, value: "IEPL" },
  { key: /BGP/, value: "BGP" },
  { key: /MPLS/, value: "MPLS" },
  { key: /MSTP/, value: "MSTP" }
];

// æœåŠ¡å™¨æä¾›å•†å¤‡æ³¨
const providerRemarks = [
  "CMI", "CTG", "CUG", "BBTEC", "IIJ", "SoftBank", "NTT", "Oracle", "Alibaba", "Reprise",
  "xTom", "DMIT", "SiliCloud", "Misaka", "Nero", "Nero Pro", "AperNet", "XNNET", "Jinx",
  "Sharon", "Bandwagon", "Spartan", "Eons", "Pittqiao", "DataCom", "CNServ", "Kirino",
  "Cloudcone", "Racknerd", "Lain.sh", "AkileCloud"
];

// æ–°å¢ï¼šISPè¯†åˆ«å¤‡æ³¨
const ispRemarks = [
  "HKT", "Suburban", "SuburbanBB", "CHT", "Chunghwa", "AT&T", "ATT", "Astound", "RCN", "Wave", "Grande", "Frontier"
];

function renameNodes(proxies) {
  let processedNodes = [];
  let countryGroups = {}; // æŒ‰å›½å®¶åˆ†ç»„å­˜å‚¨èŠ‚ç‚¹

  proxies.forEach((node) => {
    let name = node.name;

    // 1. è¿‡æ»¤åŒ…å«æ’é™¤å…³é”®è¯çš„èŠ‚ç‚¹
    if (excludeKeywords.some(regex => regex.test(name))) {
      return;
    }

    let country = "", flag = "", countryCode = "", countryCN = "";

    // 2. ä¼˜å…ˆä½¿ç”¨å›½æ——è¯†åˆ«å›½å®¶
    FG.forEach((emoji, index) => {
      if (name.includes(emoji)) {
        country = ZH[index];
        countryCN = ZH[index];
        flag = emoji;
        countryCode = EN[index];
      }
    });

    // 3. å¦‚æœå›½æ——æœªè¯†åˆ«åˆ°å›½å®¶ï¼Œå†å°è¯•ä»åç§°ä¸­æå–
    if (!country) {
      ZH.forEach((zhName, index) => {
        if (name.includes(zhName) || name.includes(EN[index])) {
          country = zhName;
          countryCN = zhName;
          flag = FG[index];
          countryCode = EN[index];
        }
      });
    }

    // 4. å¦‚æœä»æ— æ³•è¯†åˆ«å›½å®¶ï¼Œè®¾ä¸ºâ€œæœªçŸ¥â€
    if (!country) {
      flag = "ğŸŒ";
      countryCN = "æœªçŸ¥";
      countryCode = "Unknown";
    }

    // 5. è¯†åˆ«èŠ‚ç‚¹ç±»å‹
    let type = "AirP";
    if (/è‡ªå»º/.test(name)) type = "ZiJian";
    else if (/åˆç§Ÿ/.test(name)) type = "Hezu";

    // 6. è¯†åˆ«å¤‡æ³¨ä¿¡æ¯
    let remarks = [];

    // 6.1 åŸæœ‰å¤‡æ³¨åŒ¹é…
    extraRemarks.forEach(({ key, value }) => {
      if (key.test(name)) {
        remarks.push(value);
      }
    });

    // 6.2 é«˜ä¼˜å…ˆçº§å¤‡æ³¨
    let hasHighPriorityRemark = false;
    highPriorityRemarks.forEach(({ key, value }) => {
      if (key.test(name)) {
        remarks.push(value);
        hasHighPriorityRemark = true;
      }
    });

    // 6.3 å…³é”®è¯å¤‡æ³¨åŒ¹é…ï¼ˆä¸“çº¿ï¼‰
    remarkKeywords.forEach(({ key, value }) => {
      if (key.test(name) && !remarks.includes(value) && !(hasHighPriorityRemark && value === "DLine")) {
        remarks.push(value);
      }
    });

    // 6.4 å®½å¸¦å¤§å°è¯†åˆ«
    let bandwidthMatch = name.match(/(\d+(\.\d+)?[MG]bps)/i);
    if (bandwidthMatch) {
      remarks.push(bandwidthMatch[1]);
    }

    // 6.5 æœåŠ¡å™¨æä¾›å•†å¤‡æ³¨
    providerRemarks.forEach(provider => {
      if (name.includes(provider) && !remarks.includes(provider)) {
        remarks.push(provider);
      }
    });

    // 6.6 æ–°å¢ï¼šISPè¯†åˆ«å¤‡æ³¨
    ispRemarks.forEach(isp => {
      if (name.includes(isp) && !remarks.includes(isp)) {
        remarks.push(isp);
      }
    });

    // 7. è¯†åˆ«å€ç‡
    let multiplier = "1.00x";
    let multiplierMatch = name.match(/(?<!\d)(\d+(\.\d+)?)[xXå€](?!\w)/);
    if (multiplierMatch) {
      let multiplierValue = parseFloat(multiplierMatch[1]);
      multiplier = multiplierValue.toFixed(3).replace(/0+$/, "").padEnd(4, "0") + "x";

      // å½“å€ç‡å¤§äº 5.00 æ—¶ï¼Œæ·»åŠ  "ğŸš¨"
      if (multiplierValue > 5.00) {
        remarks.push("ğŸš¨");
      }
    }

    // å€ç‡ä¸º 0.00x æ—¶æ·»åŠ  UnLD
    if (multiplier === "0.00x") {
      remarks.push("UnLD");
    }

    // 8. ç»„åˆæœ€ç»ˆåç§°
    let finalName = `${flag} ${countryCN} ${countryCode} ${type}`;
    if (remarks.length > 0) finalName += ` ${remarks.join(" ")}`;
    finalName += ` - ${multiplier}`;

    // 9. æŒ‰å›½å®¶åˆ†ç»„å­˜å‚¨
    if (!countryGroups[countryCode]) {
      countryGroups[countryCode] = [];
    }
    countryGroups[countryCode].push({ name: finalName, originalNode: node });
  });

  // 10. æŒ‰å›½å®¶æ’åºç¼–å·
  Object.keys(countryGroups).forEach(countryCode => {
    countryGroups[countryCode].sort((a, b) => a.name.length - b.name.length);
    countryGroups[countryCode].forEach((nodeData, index) => {
      let nodeNumber = String(index + 1).padStart(2, "0");
      nodeData.originalNode.name = `${nodeData.name.replace(" -", ` ${nodeNumber} -`)}`;
      processedNodes.push(nodeData.originalNode);
    });
  });

  return processedNodes;
}

// å¤„ç†èŠ‚ç‚¹
const updatedNodes = renameNodes(proxies);
return updatedNodes;
